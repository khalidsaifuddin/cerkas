{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/khalid/go/src/github.com/cerkas/cerkas-frontend/app/%5BtenantCode%5D/%5BproductCode%5D/%5BobjectCode%5D/%5BviewContentCode%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { useParams } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport { vscDarkPlus } from 'react-syntax-highlighter/dist/esm/styles/prism';\n\ninterface RouteParams {\n  tenantCode: string;\n  productCode: string;\n  objectCode: string;\n  viewContentCode: string;\n  [key: string]: string | string[];\n}\n\nconst DynamicTable = ({ fields }) => {\n  return (\n    <div className=\"overflow-x-auto\">\n      <table className=\"table-auto w-full border border-gray-100\">\n        <thead>\n          <tr className=\"bg-gray-100\">\n            {fields.map((field) => (\n              <th key={field.field_code} className=\"px-4 py-2 border border-gray-100\">\n                {field.field_name}\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {fields.map((field) => (\n              <td key={field.field_code} className=\"px-4 py-2 border border-gray-100 text-gray-600\">\n                {/* Placeholder */} example\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default function DynamicPage() {\n  const params = useParams<RouteParams>();\n  const { tenantCode, productCode, objectCode, viewContentCode } = params;\n\n  const [responseData, setResponseData] = useState<any>(null); // You can define a more specific type if you know the shape\n  const [viewContent, setViewContent] = useState<any>(null);\n  const [viewLayout, setViewLayout] = useState<any>(null);\n\n  const [isAPIResponseAccordionOpen, setIsAPIResponseAccordionOpen] = useState(false);\n  const [isDynamicParamAccordionOpen, setIsDynamicParamAccordionOpen] = useState(false);\n\n  useEffect(() => {\n    const sendRequest = async () => {\n      try {\n        const response = await fetch(\n          `http://localhost:8080/t/${tenantCode}/p/${productCode}/o/${objectCode}/view/${viewContentCode}/record`,\n          {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({}), // Add any payload here if needed\n          }\n        );\n\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch\");\n        }\n\n        const data = await response.json();\n        setResponseData(data.data);\n        setViewContent(data.data.view_content);\n        setViewLayout(data.data.layout);\n      } catch (error) {\n        console.error(\"API error:\", error);\n        setResponseData({ error: (error as Error).message });\n      }\n    };\n\n    if (tenantCode && productCode && objectCode && viewContentCode) {\n      sendRequest();\n    }\n  }, [tenantCode, productCode, objectCode, viewContentCode]);\n\n  return (\n    <div className=\"flex flex-col items-left justify-left min-h-screen bg-gray-100\">\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h1 className=\"text-3xl font-bold text-indigo-700 mb-6\">\n          {viewContent?.object?.display_name}\n        </h1>\n\n        <div className=\"p-4 space-y-4\">\n          {viewLayout.children.map((child, index) => {\n            if (child.type === \"table\") {\n              return (\n                <Card key={index} className=\"shadow-md\">\n                  <CardContent className=\"p-4\">\n                    <h2 className=\"text-lg font-semibold mb-4\">{child.class_name}</h2>\n                    <DynamicTable fields={child.props.fields} />\n                  </CardContent>\n                </Card>\n              );\n            }\n            return null;\n          })}\n        </div>\n\n        <div className=\"mt-2\">\n          <button\n            onClick={() => setIsDynamicParamAccordionOpen(!isDynamicParamAccordionOpen)}\n            className=\"w-full flex justify-between items-center text-left bg-indigo-100 px-4 py-2 rounded-lg font-semibold text-gray-800 hover:bg-indigo-200 transition\"\n          >\n            <span>Dynamic Param</span>\n            <span>{isDynamicParamAccordionOpen ? \"−\" : \"+\"}</span>\n          </button>\n\n          {isDynamicParamAccordionOpen && (\n            <pre className=\"mt-2 bg-gray-200 text-sm p-4 rounded overflow-auto text-gray-800\">\n              <div className=\"space-y-3 text-gray-700\">\n                <p>\n                  <span className=\"font-semibold\">Tenant Code:</span>{\" \"}\n                  <span className=\"text-indigo-600\">{tenantCode}</span>\n                </p>\n                <p>\n                  <span className=\"font-semibold\">Product Code:</span>{\" \"}\n                  <span className=\"text-indigo-600\">{productCode}</span>\n                </p>\n                <p>\n                  <span className=\"font-semibold\">Object Code:</span>{\" \"}\n                  <span className=\"text-indigo-600\">{objectCode}</span>\n                </p>\n                <p>\n                  <span className=\"font-semibold\">View Content Code:</span>{\" \"}\n                  <span className=\"text-indigo-600\">{viewContentCode}</span>\n                </p>\n              </div>\n            </pre>\n          )}\n        </div>\n\n        <div className=\"mt-2\">\n          <button\n            onClick={() => setIsAPIResponseAccordionOpen(!isAPIResponseAccordionOpen)}\n            className=\"w-full flex justify-between items-center text-left bg-indigo-100 px-4 py-2 rounded-lg font-semibold text-gray-800 hover:bg-indigo-200 transition\"\n          >\n            <span>Layout API Response</span>\n            <span>{isAPIResponseAccordionOpen ? \"−\" : \"+\"}</span>\n          </button>\n\n          {isAPIResponseAccordionOpen && (\n            <SyntaxHighlighter\n              language=\"json\"\n              style={vscDarkPlus}\n              showLineNumbers\n              wrapLines\n              customStyle={{\n                borderRadius: '0.5rem',\n                padding: '1rem',\n                fontSize: '0.875rem',\n                backgroundColor: '#1e1e1e'\n              }}\n            >\n              {JSON.stringify(responseData, null, 2)}\n            </SyntaxHighlighter>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}